var typeScriptHelper=function(n,t){"use strict";function s(n){return n=n||{},typeof n.codeGenTarget=="string"&&(n.codeGenTarget=h(n.codeGenTarget)),f(f({},o),n)}function h(n){var t;switch(n){case"EcmaScript3":t=0;break;case"EcmaScript5":t=1;break;default:throw{name:"TypeError",message:i("ECMAScript target version '{0}' not supported.",n)};}return t}function f(n,t){var i;n=n||{};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function i(){for(var u=arguments[0],t=u,i,r,f=arguments.length,n=0;n<f-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),r=arguments[n+1],t=t.replace(i,r);return t}function r(n){return n.toLocaleUpperCase()}var u={},o={propagateEnumConstants:!1,removeComments:!1,watch:!1,noResolve:!1,allowAutomaticSemicolonInsertion:!0,noImplicitAny:!1,noLib:!1,codeGenTarget:0,moduleGenTarget:0,outFileOption:"",outDirOption:"",mapSourceFiles:!1,mapRoot:"",sourceRoot:"",generateDeclarationFiles:!1,useCaseSensitiveFileResolution:!1,gatherDiagnostics:!1,updateTC:!1},e=function(){function n(){}return n.prototype.Write=function(){},n.prototype.WriteLine=function(){},n.prototype.Close=function(){},n}(),c=function(){function n(n){this._files=n;this.newLine="\r\n";this.stderr=new e;this.stdout=new e}var u="Method 'IoHost.{0}' is not implemented.";return n.prototype.readFile=function(n){var u,f;if(u=r(n),typeof this._files[u]=="undefined")throw new Error(i("File '{0}' does not exist.",n));return f=this._files[u],new t(f.content,0)},n.prototype.writeFile=function(n,t){var i=r(n);this._files[i]={path:n,content:t}},n.prototype.deleteFile=function(n){var t=r(n);this._files[t]=undefined},n.prototype.dir=function(){throw new Error(i(u,"dir"));},n.prototype.fileExists=function(n){var t;return t=r(n),typeof this._files[t]!="undefined"},n.prototype.directoryExists=function(){throw new Error(i(u,"directoryExists"));},n.prototype.createDirectory=function(){throw new Error(i(u,"createDirectory"));},n.prototype.resolvePath=function(n){return n},n.prototype.dirName=function(){return""},n.prototype.findFile=function(){throw new Error(i(u,"findFile"));},n.prototype.print=function(){throw new Error(i(u,"print"));},n.prototype.printLine=function(){throw new Error(i(u,"printLine"));},n.prototype.watchFile=function(){throw new Error(i(u,"watchFile"));},n.prototype.run=function(){throw new Error(i(u,"run"));},n.prototype.getExecutingFilePath=function(){throw new Error(i(u,"getExecutingFilePath"));},n.prototype.quit=function(){throw new Error(i(u,"quit"));},n.prototype.dispose=function(){this._files=null;this.stderr=null;this.stdout=null},n}(),l=function(){function n(n,t){this.scriptSnapshot=n;this.byteOrderMark=t}return n}(),a=function(){function t(t,i){this.ioHost=t;this.inputFiles=[];this.resolvedFiles=[];this.inputFileNameToOutputFileName=new n.StringHashTable;this.fileNameToSourceFile=new n.StringHashTable;this.errors=[];this.hasErrors=!1;this.logger=null;this.compilationSettings=i}return t.prototype.batchCompile=function(t){return this.inputFiles.push(t),this.logger=new n.NullLogger,this.resolve(),this.compile()},t.prototype.resolve=function(){var u=!this.compilationSettings.noLib,t=[],i=n.ReferenceResolver.resolve(this.inputFiles,this,this.compilationSettings),r,f,e;for(t=i.resolvedFiles,u=!this.compilationSettings.noLib&&!i.seenNoDefaultLibTag,r=0,f=i.diagnostics.length;r<f;r++)this.addDiagnostic(i.diagnostics[r]);u&&(e={path:this.getDefaultLibraryFilePath(),referencedFiles:[],importedFiles:[]},t=[e].concat(t));this.resolvedFiles=t},t.prototype.compile=function(){for(var y=this,t=new n.TypeScriptCompiler(this.logger,this.compilationSettings),c=!1,l=!1,u,f,e,o,a,s,v,h,i=0,r=this.resolvedFiles.length;i<r;i++)u=this.resolvedFiles[i],f=this.getSourceFile(u.path),t.addSourceUnit(u.path,f.scriptSnapshot,f.byteOrderMark,0,!1,u.referencedFiles),e=t.getSyntacticDiagnostics(u.path),t.reportDiagnostics(e,this),e.length>0&&(c=!0);if(c)return!0;for(t.pullTypeCheck(),o=t.fileNameToDocument.getAllKeys(),r=o.length,i=0;i<r;i++)a=o[i],s=t.getSemanticDiagnostics(a),s.length>0&&(l=!0,t.reportDiagnostics(s,this));return(v=function(n,t){y.inputFileNameToOutputFileName.addOrUpdate(n,t)},h=t.emitAll(this,v),t.reportDiagnostics(h,this),h.length>0)?!0:l?!0:!1},t.prototype.getSourceFile=function(t){var i=this.fileNameToSourceFile.lookup(t),r,u;return i||(r=this.ioHost.readFile(t),u=n.ScriptSnapshot.fromString(r.contents),i=new l(u,r.byteOrderMark),this.fileNameToSourceFile.add(t,i)),i},t.prototype.getDefaultLibraryFilePath=function(){return"lib.d.ts"},t.prototype.getScriptSnapshot=function(n){return this.getSourceFile(n).scriptSnapshot},t.prototype.resolveRelativePath=function(n){return n},t.prototype.fileExists=function(n){return this.ioHost.fileExists(n)},t.prototype.getParentDirectory=function(n){return this.ioHost.dirName(n)},t.prototype.addDiagnostic=function(t){var r=0,u=0;if(this.hasErrors=!0,t.fileName()){var f=this.getScriptSnapshot(t.fileName()),e=new n.LineMap(f.getLineStartPositions(),f.getLength()),i={line:-1,character:-1};e.fillLineAndCharacterFromPosition(t.start(),i);r=i.line+1;u=i.character+1}this.errors.push({message:t.message(),fileName:t.fileName(),lineNumber:r,columnNumber:u})},t.prototype.writeFile=function(n,t){this.ioHost.writeFile(n,t)},t.prototype.directoryExists=function(n){return this.ioHost.directoryExists(n)},t.prototype.resolvePath=function(n){return this.ioHost.resolvePath(n)},t.prototype.dispose=function(){this.ioHost=null;this.inputFiles=null;this.resolvedFiles=null;this.inputFileNameToOutputFileName=null;this.fileNameToSourceFile=null;this.errors=null;this.hasErrors=!1;this.logger=null;this.compilationSettings=null},t}();return u.compile=function(n,t,i,u){var v={compiledCode:""},f=t,w,g=f.replace(/\.ts$/i,".js"),y,e,p,o,b,k,h,l,d;if(e={},i)for(b=i.length,o=0;o<b;o++)p=i[o],k=r(p.path),e[k]=p;return w=r(f),e[w]={path:f,content:n},h=new c(e),l=new a(h,s(u)),d=l.batchCompile(f),d?v.errors=l.errors:(y=h.readFile(g),y&&(v.compiledCode=y.contents)),l.dispose(),h.dispose(),JSON.stringify(v)},u}(TypeScript,FileInformation);