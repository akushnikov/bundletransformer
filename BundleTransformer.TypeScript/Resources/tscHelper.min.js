var typeScriptHelper=function(n,t){"use strict";function s(n){var t;return n=n||{},typeof n.codeGenTarget=="string"&&(n.codeGenTarget=h(n.codeGenTarget)),t=f(f({},o),n)}function h(n){var t;switch(n){case"EcmaScript3":t=0;break;case"EcmaScript5":t=1;break;default:throw{name:"TypeError",message:i("ECMAScript target version '{0}' not supported.",n)};}return t}function f(n,t){var i;n=n||{};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function i(){for(var u=arguments[0],t=u,i,r,f=arguments.length,n=0;n<f-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),r=arguments[n+1],t=t.replace(i,r);return t}function r(n){return n.toLocaleUpperCase()}var u={},o={propagateConstants:!1,minWhitespace:!1,emitComments:!0,watch:!1,exec:!1,resolve:!0,disallowBool:!1,allowAutomaticSemicolonInsertion:!0,allowModuleKeywordInExternalModuleReference:!0,useDefaultLib:!0,codeGenTarget:0,moduleGenTarget:0,outputOption:"",mapSourceFiles:!1,emitFullSourceMapPath:!1,generateDeclarationFiles:!1,useCaseSensitiveFileResolution:!1,gatherDiagnostics:!1,updateTC:!1,implicitAny:!1},e=function(){function n(){}return n.prototype.Write=function(){},n.prototype.WriteLine=function(){},n.prototype.Close=function(){},n}(),c=function(){function n(n){this._files=n,this.arguments=[],this.stderr=new e,this.stdout=new e}var u="Method 'IoHost.{0}' is not supported.";return n.prototype.readFile=function(n){var u,f,e;if(u=r(n),typeof this._files[u]=="undefined")throw new Error(i("File '{0}' does not exist.",n));return f=this._files[u],e=new t(f.content,0)},n.prototype.writeFile=function(n,t){var i=r(n);this._files[i]={path:n,content:t}},n.prototype.deleteFile=function(n){var t=r(n);this._files[t]=undefined},n.prototype.dir=function(){throw new Error(i(u,"dir"));},n.prototype.fileExists=function(n){var t,i;return t=r(n),i=typeof this._files[t]!="undefined"},n.prototype.directoryExists=function(){throw new Error(i(u,"directoryExists"));},n.prototype.createDirectory=function(){throw new Error(i(u,"createDirectory"));},n.prototype.resolvePath=function(n){return n},n.prototype.dirName=function(){return""},n.prototype.findFile=function(){throw new Error(i(u,"findFile"));},n.prototype.print=function(){throw new Error(i(u,"print"));},n.prototype.printLine=function(){throw new Error(i(u,"printLine"));},n.prototype.watchFile=function(){throw new Error(i(u,"watchFile"));},n.prototype.run=function(){throw new Error(i(u,"run"));},n.prototype.getExecutingFilePath=function(){throw new Error(i(u,"getExecutingFilePath"));},n.prototype.quit=function(){throw new Error(i(u,"quit"));},n.prototype.dispose=function(){this._files=null,this.arguments=null,this.stderr=null,this.stdout=null},n}(),l=function(){function t(n,t){this.ioHost=n,this.setCompilationEnvironment(t),this.errors=[],this.hasErrors=!1}return t.prototype.addDiagnostic=function(t){var u=0,f=0,i,e,r;this.hasErrors=!0,t.fileName()&&(i=this.compilationEnvironment.getSourceUnit(t.fileName()),i||(i=new n.SourceUnit(t.fileName(),this.ioHost.readFile(t.fileName()))),e=new n.LineMap(i.getLineStartPositions(),i.getLength()),r={line:-1,character:-1},e.fillLineAndCharacterFromPosition(t.start(),r),u=r.line+1,f=r.character+1),this.errors.push({message:t.message(),fileName:t.fileName(),lineNumber:u,columnNumber:f})},t.prototype.setCompilationEnvironment=function(n){this.compilationEnvironment=n},t.prototype.reset=function(){this.errors=[],this.hasErrors=!1},t.prototype.dispose=function(){this.ioHost=null,this.setCompilationEnvironment(null),this.errors=null,this.hasErrors=!1},t}(),a=function(){function t(n){this.errorReporter=n,this.pathMap={},this.resolvedPaths={}}return t.prototype.getPathIdentifier=function(n){return n.toLocaleUpperCase()},t.prototype.isResolved=function(n){return this.resolvedPaths[this.getPathIdentifier(this.pathMap[n])]!==undefined},t.prototype.resolveCompilationEnvironment=function(t,i){var e=this,o,u,s,f,r,h,c;for(u=new n.CompilationEnvironment(t.compilationSettings,t.ioHost),f=t.code,h=f.length,this.errorReporter.setCompilationEnvironment(u),s=u.code,c={errorReporter:this.errorReporter,postResolution:function(n,t){var i=e.getPathIdentifier(n);e.resolvedPaths[i]||(s.push(t),e.resolvedPaths[i]=!0)}},r=0;r<h;r++)o=n.switchToForwardSlashes(t.ioHost.resolvePath(f[r].path)),this.pathMap[f[r].path]=o,i.resolveCode(o,"",!1,c);return u},t.prototype.dispose=function(){this.errorReporter=null,this.pathMap=null,this.resolvedPaths=null},t}(),v=function(){function n(n){this._ioHost=n}return n.prototype.writeFile=function(n,t,i){this._ioHost.writeFile(n,t,i)},n.prototype.directoryExists=function(n){return this._ioHost.directoryExists(n)},n.prototype.fileExists=function(n){return this._ioHost.fileExists(n)},n.prototype.resolvePath=function(n){return n},n.prototype.dispose=function(){this._ioHost=null},n}(),y=function(){function t(t,i){this.ioHost=t,this.resolvedEnvironment=null,this.compilationSettings=i,this.compilationEnvironment=new n.CompilationEnvironment(this.compilationSettings,this.ioHost),this.errorReporter=new l(this.ioHost,this.compilationEnvironment)}return t.prototype.batchCompile=function(t){var i=this.compilationEnvironment.code;this.compilationSettings.useDefaultLib&&i.push(new n.SourceUnit("lib.d.ts",null)),i.push(new n.SourceUnit(t,null)),this.resolvedEnvironment=this._resolve(),this.compile()},t.prototype._resolve=function(){var f,i,e,u,r,o,t;for(f=new n.CodeResolver(this.compilationEnvironment),i=new a(this.errorReporter),e=i.resolveCompilationEnvironment(this.compilationEnvironment,f,!0),u=this.compilationEnvironment.code,o=u.length,r=0;r<o;r++)t=u[r].path,i.isResolved(t)||(n.isTSFile(t)||n.isDTSFile(t)?this.errorReporter.addDiagnostic(new n.Diagnostic(null,0,0,268,[t])):this.errorReporter.addDiagnostic(new n.Diagnostic(null,0,0,269,[t])));return i.dispose(),e},t.prototype.compile=function(){var tt=this,p,t,w=!1,b=!1,f,k,r,i,e,o,s,h,d,u,g,c,l,nt,a,y;for(p=new n.NullLogger,t=new n.TypeScriptCompiler(p,this.compilationSettings,null),f=this.resolvedEnvironment.code,k=f.length,r=0;r<k;r++)i=f[r],e=i.path,o=i.fileInformation,i.fileInformation!==null&&(t.addSourceUnit(e,n.ScriptSnapshot.fromString(o.contents()),o.byteOrderMark(),0,!1,i.referencedFiles),s=t.getSyntacticDiagnostics(e),t.reportDiagnostics(s,this.errorReporter),s.length>0&&(w=!0));if(w)return!0;for(t.pullTypeCheck(),h=t.fileNameToDocument.getAllKeys(),d=h.length,u=0;u<d;u++)g=h[u],c=t.getSemanticDiagnostics(g),c.length>0&&(b=!0,t.reportDiagnostics(c,this.errorReporter));return(l=new v(this.ioHost),nt=function(n,t){tt.resolvedEnvironment.inputFileNameToOutputFileName.addOrUpdate(n,t)},a=t.emitAll(l,nt),t.reportDiagnostics(a,this.errorReporter),l.dispose(),a.length>0)?!0:b?!0:(y=t.emitAllDeclarations(),t.reportDiagnostics(y,this.errorReporter),y.length>0)?!0:!1},t.prototype.dispose=function(){this.ioHost=null,this.resolvedEnvironment=null,this.compilationSettings=null,this.compilationEnvironment=null,this.errorReporter.dispose(),this.errorReporter=null},t}();return u.compile=function(n,t,i,u){var l={compiledCode:""},e=t,w,d=e.replace(/\.ts$/i,".js"),a,o,v,h,b,k,p,f;if(o={},i)for(b=i.length,h=0;h<b;h++)v=i[h],k=r(v.path),o[k]=v;return w=r(e),o[w]={content:n,path:e},p=new c(o),f=new y(p,s(u)),f.batchCompile(e),f.errorReporter.hasErrors?l.errors=f.errorReporter.errors:(a=f.ioHost.readFile(d),a&&(l.compiledCode=a.contents())),f.dispose(),p.dispose(),JSON.stringify(l)},u}(TypeScript,FileInformation);