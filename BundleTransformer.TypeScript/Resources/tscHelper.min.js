var typeScriptHelper=function(n,t){"use strict";function s(n){return n=n||{},typeof n.codeGenTarget=="string"&&(n.codeGenTarget=h(n.codeGenTarget)),f(f({},o),n)}function h(n){var t;switch(n){case"EcmaScript3":t=0;break;case"EcmaScript5":t=1;break;default:throw{name:"TypeError",message:i("ECMAScript target version '{0}' not supported.",n)};}return t}function f(n,t){var i;n=n||{};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function i(){for(var u=arguments[0],t=u,i,r,f=arguments.length,n=0;n<f-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),r=arguments[n+1],t=t.replace(i,r);return t}function r(n){return n.toLocaleUpperCase()}var u={},o={propagateConstants:!1,minWhitespace:!1,emitComments:!0,watch:!1,exec:!1,resolve:!0,disallowBool:!1,allowAutomaticSemicolonInsertion:!0,allowModuleKeywordInExternalModuleReference:!0,useDefaultLib:!0,codeGenTarget:0,moduleGenTarget:0,outputOption:"",mapSourceFiles:!1,emitFullSourceMapPath:!1,generateDeclarationFiles:!1,useCaseSensitiveFileResolution:!1,gatherDiagnostics:!1,updateTC:!1,implicitAny:!1},e=function(){function n(){}return n.prototype.Write=function(){},n.prototype.WriteLine=function(){},n.prototype.Close=function(){},n}(),c=function(){function n(n){this._files=n;this.arguments=[];this.stderr=new e;this.stdout=new e}var u="Method 'IoHost.{0}' is not implemented.";return n.prototype.readFile=function(n){var u,f;if(u=r(n),typeof this._files[u]=="undefined")throw new Error(i("File '{0}' does not exist.",n));return f=this._files[u],new t(f.content,0)},n.prototype.writeFile=function(n,t){var i=r(n);this._files[i]={path:n,content:t}},n.prototype.deleteFile=function(n){var t=r(n);this._files[t]=undefined},n.prototype.dir=function(){throw new Error(i(u,"dir"));},n.prototype.fileExists=function(n){var t;return t=r(n),typeof this._files[t]!="undefined"},n.prototype.directoryExists=function(){throw new Error(i(u,"directoryExists"));},n.prototype.createDirectory=function(){throw new Error(i(u,"createDirectory"));},n.prototype.resolvePath=function(n){return n},n.prototype.dirName=function(){return""},n.prototype.findFile=function(){throw new Error(i(u,"findFile"));},n.prototype.print=function(){throw new Error(i(u,"print"));},n.prototype.printLine=function(){throw new Error(i(u,"printLine"));},n.prototype.watchFile=function(){throw new Error(i(u,"watchFile"));},n.prototype.run=function(){throw new Error(i(u,"run"));},n.prototype.getExecutingFilePath=function(){throw new Error(i(u,"getExecutingFilePath"));},n.prototype.quit=function(){throw new Error(i(u,"quit"));},n.prototype.dispose=function(){this._files=null;this.arguments=null;this.stderr=null;this.stdout=null},n}(),l=function(){function t(n,t){this.ioHost=n;this.setCompilationEnvironment(t);this.errors=[];this.hasErrors=!1}return t.prototype.addDiagnostic=function(t){var u=0,f=0,i,e,r;this.hasErrors=!0;t.fileName()&&(i=this.compilationEnvironment.getSourceUnit(t.fileName()),i||(i=new n.SourceUnit(t.fileName(),this.ioHost.readFile(t.fileName()))),e=new n.LineMap(i.getLineStartPositions(),i.getLength()),r={line:-1,character:-1},e.fillLineAndCharacterFromPosition(t.start(),r),u=r.line+1,f=r.character+1);this.errors.push({message:t.message(),fileName:t.fileName(),lineNumber:u,columnNumber:f})},t.prototype.setCompilationEnvironment=function(n){this.compilationEnvironment=n},t.prototype.reset=function(){this.errors=[];this.hasErrors=!1},t.prototype.dispose=function(){this.ioHost=null;this.setCompilationEnvironment(null);this.errors=null;this.hasErrors=!1},t}(),a=function(){function t(n){this.errorReporter=n;this.pathMap={};this.resolvedPaths={}}return t.prototype.getPathIdentifier=function(n){return n.toLocaleUpperCase()},t.prototype.isResolved=function(n){return this.resolvedPaths[this.getPathIdentifier(this.pathMap[n])]!==undefined},t.prototype.resolveCompilationEnvironment=function(t,i){var e=this,o,u,s,f,r,h,c;for(u=new n.CompilationEnvironment(t.compilationSettings,t.ioHost),f=t.code,h=f.length,this.errorReporter.setCompilationEnvironment(u),s=u.code,c={errorReporter:this.errorReporter,postResolution:function(n,t){var i=e.getPathIdentifier(n);e.resolvedPaths[i]||(s.push(t),e.resolvedPaths[i]=!0)}},r=0;r<h;r++)o=n.switchToForwardSlashes(t.ioHost.resolvePath(f[r].path)),this.pathMap[f[r].path]=o,i.resolveCode(o,"",!1,c);return u},t.prototype.dispose=function(){this.errorReporter=null;this.pathMap=null;this.resolvedPaths=null},t}(),v=function(){function n(n){this._ioHost=n}return n.prototype.writeFile=function(n,t,i){this._ioHost.writeFile(n,t,i)},n.prototype.directoryExists=function(n){return this._ioHost.directoryExists(n)},n.prototype.fileExists=function(n){return this._ioHost.fileExists(n)},n.prototype.resolvePath=function(n){return n},n.prototype.dispose=function(){this._ioHost=null},n}(),y=function(){function t(t,i){this.ioHost=t;this.resolvedEnvironment=null;this.compilationSettings=i;this.compilationEnvironment=new n.CompilationEnvironment(this.compilationSettings,this.ioHost);this.errorReporter=new l(this.ioHost,this.compilationEnvironment)}return t.prototype._resolve=function(){var o,i,r,u,s,e,f,h,t;for(i=this.compilationEnvironment,r=this.errorReporter,o=new n.CodeResolver(i),u=new a(r),s=u.resolveCompilationEnvironment(i,o,!0),e=i.code,h=e.length,f=0;f<h;f++)t=e[f].path,u.isResolved(t)||(n.isTSFile(t)||n.isDTSFile(t)?r.addDiagnostic(new n.Diagnostic(null,0,0,268,[t])):r.addDiagnostic(new n.Diagnostic(null,0,0,269,[t])));return u.dispose(),s},t.prototype._addSourceUnit=function(t){var s=!1,u,h,r,i,f,e,o;for(u=this.resolvedEnvironment.code,h=u.length,r=0;r<h;r++)i=u[r],f=i.path,e=i.fileInformation,i.fileInformation!==null&&(t.addSourceUnit(f,n.ScriptSnapshot.fromString(e.contents()),e.byteOrderMark(),0,!1,i.referencedFiles),o=t.getSyntacticDiagnostics(f),t.reportDiagnostics(o,this.errorReporter),o.length>0&&(s=!0));return s},t.prototype._diagnoseSemanticErrors=function(n){var u=!1,i,f,t,e,r;for(i=n.fileNameToDocument.getAllKeys(),f=i.length,t=0;t<f;t++)e=i[t],r=n.getSemanticDiagnostics(e),r.length>0&&(u=!0,n.reportDiagnostics(r,this.errorReporter));return u},t.prototype._emitAll=function(n){var f=this,r,t,u,i;return t=new v(this.ioHost),u=function(n,t){f.resolvedEnvironment.inputFileNameToOutputFileName.addOrUpdate(n,t)},i=n.emitAll(t,u),n.reportDiagnostics(i,this.errorReporter),r=i.length>0,t.dispose(),r},t.prototype.compile=function(t){var r,u,i,f,e,o;return(r=this.compilationEnvironment.code,this.compilationSettings.useDefaultLib&&r.push(new n.SourceUnit("lib.d.ts",null)),r.push(new n.SourceUnit(t,null)),this.resolvedEnvironment=this._resolve(),u=new n.NullLogger,i=new n.TypeScriptCompiler(u,this.compilationSettings,null),f=this._addSourceUnit(i),f)?!0:(i.pullTypeCheck(),e=this._diagnoseSemanticErrors(i),o=this._emitAll(i),o)?!0:e?!0:!1},t.prototype.dispose=function(){this.ioHost=null;this.resolvedEnvironment=null;this.compilationSettings=null;this.compilationEnvironment=null;this.errorReporter.dispose();this.errorReporter=null},t}();return u.compile=function(n,t,i,u){var a={compiledCode:""},f=t,w,g=f.replace(/\.ts$/i,".js"),v,e,p,o,b,k,h,l,d;if(e={},i)for(b=i.length,o=0;o<b;o++)p=i[o],k=r(p.path),e[k]=p;return w=r(f),e[w]={path:f,content:n},h=new c(e),l=new y(h,s(u)),d=l.compile(f),d?a.errors=l.errorReporter.errors:(v=h.readFile(g),v&&(a.compiledCode=v.contents())),l.dispose(),h.dispose(),JSON.stringify(a)},u}(TypeScript,FileInformation);