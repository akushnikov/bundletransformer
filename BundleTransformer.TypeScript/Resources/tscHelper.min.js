var typeScriptHelper=function(n){"use strict";function u(n,t){var i;n=n||{};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function t(){for(var u=arguments[0],t=u,i,r,f=arguments.length,n=0;n<f-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),r=arguments[n+1],t=t.replace(i,r);return t}function o(n){var i;switch(n){case"EcmaScript3":i=0;break;case"EcmaScript5":i=1;break;default:throw{name:"TypeError",message:t("ECMAScript target version '{0}' not supported.",n)};}return i}function s(n){return n=n||{},typeof n.codeGenTarget=="string"&&(n.codeGenTarget=o(n.codeGenTarget)),u(u({},e),n)}function i(n){return n.toLocaleUpperCase()}var r={},e={propagateEnumConstants:!1,removeComments:!1,watch:!1,noResolve:!1,allowAutomaticSemicolonInsertion:!0,noImplicitAny:!1,noLib:!1,codeGenTarget:0,moduleGenTarget:0,outFileOption:"",outDirOption:"",mapSourceFiles:!1,mapRoot:"",sourceRoot:"",generateDeclarationFiles:!1,useCaseSensitiveFileResolution:!1,gatherDiagnostics:!1,codepage:null},f=function(){function n(){}return n.prototype.Write=function(){},n.prototype.WriteLine=function(){},n.prototype.Close=function(){},n}(),h=function(){function r(n){this._files=n;this.newLine="\r\n";this.stderr=new f;this.stdout=new f}var u="Method 'IoHost.{0}' is not implemented.";return r.prototype.readFile=function(r){var u,f;if(u=i(r),typeof this._files[u]=="undefined")throw new Error(t("File '{0}' does not exist.",r));return f=this._files[u],new n.FileInformation(f.content,0)},r.prototype.writeFile=function(n,t){var r=i(n);this._files[r]={path:n,content:t}},r.prototype.deleteFile=function(n){var t=i(n);this._files[t]=undefined},r.prototype.dir=function(){throw new Error(t(u,"dir"));},r.prototype.fileExists=function(n){var t;return t=i(n),typeof this._files[t]!="undefined"},r.prototype.directoryExists=function(){throw new Error(t(u,"directoryExists"));},r.prototype.createDirectory=function(){throw new Error(t(u,"createDirectory"));},r.prototype.resolvePath=function(n){return n},r.prototype.dirName=function(){return""},r.prototype.findFile=function(){throw new Error(t(u,"findFile"));},r.prototype.print=function(){throw new Error(t(u,"print"));},r.prototype.printLine=function(){throw new Error(t(u,"printLine"));},r.prototype.watchFile=function(){throw new Error(t(u,"watchFile"));},r.prototype.run=function(){throw new Error(t(u,"run"));},r.prototype.getExecutingFilePath=function(){throw new Error(t(u,"getExecutingFilePath"));},r.prototype.quit=function(){throw new Error(t(u,"quit"));},r.prototype.dispose=function(){this._files=null;this.stderr=null;this.stdout=null},r}(),c=function(){function n(n,t){this.scriptSnapshot=n;this.byteOrderMark=t}return n}(),l=function(){function t(t,i){this.ioHost=t;this.inputFiles=[];this.resolvedFiles=[];this.fileNameToSourceFile=new n.StringHashTable;this.errors=[];this.hasErrors=!1;this.logger=null;this.fileExistsCache=n.createIntrinsicsObject();this.resolvePathCache=n.createIntrinsicsObject();this.compilationSettings=n.ImmutableCompilationSettings.fromCompilationSettings(i)}return t.prototype.compile=function(t){var i=this,e,o,a,r,u,s,v,h,c,y,f,l;for(n.CompilerDiagnostics.diagnosticWriter={Alert:function(){}},i.inputFiles.push(t),i.logger=new n.NullLogger,i._resolve(),e=new n.TypeScriptCompiler(i.logger,i.compilationSettings),o=i.resolvedFiles,a=o.length,r=0;r<a;r++)u=o[r],s=i.getSourceFile(u.path),e.addFile(u.path,s.scriptSnapshot,s.byteOrderMark,0,!1,u.referencedFiles);for(v=function(n){return i.resolvePath(n)},h=e.compile(v);h.moveNext();){for(l=h.current(),c=l.diagnostics,y=c.length,f=0;f<y;f++)i.addDiagnostic(c[f]);if(!i.tryWriteOutputFiles(l.outputFiles))return!0}return i.hasErrors},t.prototype._resolve=function(){var f,t,i,u,e,r,o;for(i=n.ReferenceResolver.resolve(this.inputFiles,this,this.compilationSettings.useCaseSensitiveFileResolution()),t=i.resolvedFiles,f=!this.compilationSettings.noLib()&&!i.seenNoDefaultLibTag,u=i.diagnostics,e=u.length,r=0;r<e;r++)this.addDiagnostic(u[r]);f&&(o={path:this.getDefaultLibraryFilePath(),referencedFiles:[],importedFiles:[]},t=[o].concat(t));this.resolvedFiles=t},t.prototype.getSourceFile=function(t){var i,r,u;return i=this.fileNameToSourceFile.lookup(t),i||(r=this.ioHost.readFile(t,this.compilationSettings.codepage()),u=n.ScriptSnapshot.fromString(r.contents),i=new c(u,r.byteOrderMark),this.fileNameToSourceFile.add(t,i)),i},t.prototype.getDefaultLibraryFilePath=function(){return"lib.d.ts"},t.prototype.getScriptSnapshot=function(n){return this.getSourceFile(n).scriptSnapshot},t.prototype.resolveRelativePath=function(n){return n},t.prototype.fileExists=function(n){var t=this.fileExistsCache[n];return t===undefined&&(t=this.ioHost.fileExists(n),this.fileExistsCache[n]=t),t},t.prototype.getParentDirectory=function(n){return this.ioHost.dirName(n)},t.prototype.addDiagnostic=function(n){var i,r,t,u=0,f=0;i=n.info();r=n.message();t=n.fileName();t&&(u=n.line()+1,f=n.character()+1);i.category===1&&(this.hasErrors=!0,this.errors.push({message:r,fileName:t,lineNumber:u,columnNumber:f}))},t.prototype.tryWriteOutputFiles=function(t){for(var u=t.length,i,r=0;r<u;r++){i=t[r];try{this.writeFile(i.name,i.text,i.writeByteOrderMark)}catch(f){return this.addDiagnostic(new n.Diagnostic(i.name,null,0,0,n.DiagnosticCode.Emit_Error_0,[f.message])),!1}}return!0},t.prototype.writeFile=function(n,t,i){this.ioHost.writeFile(n,t,i)},t.prototype.directoryExists=function(n){return this.ioHost.directoryExists(n)},t.prototype.resolvePath=function(n){var t=this.resolvePathCache[n];return t||(t=this.ioHost.resolvePath(n),this.resolvePathCache[n]=t),t},t.prototype.dispose=function(){this.ioHost=null;this.inputFiles=null;this.resolvedFiles=null;this.fileNameToSourceFile=null;this.errors=null;this.hasErrors=!1;this.logger=null;this.fileExistsCache=null;this.resolvePathCache=null;this.compilationSettings=null},t}();return r.compile=function(n,t,r,u){var v={compiledCode:""},f=t,w,g=f.replace(/\.ts$/i,".js"),y,e,p,o,b,k,c,a,d;if(e={},r)for(b=r.length,o=0;o<b;o++)p=r[o],k=i(p.path),e[k]=p;return w=i(f),e[w]={path:f,content:n},c=new h(e),a=new l(c,s(u)),d=a.compile(f),d?v.errors=a.errors:(y=c.readFile(g),y&&(v.compiledCode=y.contents)),a.dispose(),c.dispose(),JSON.stringify(v)},r}(TypeScript);